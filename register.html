<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>
    <link rel="stylesheet" href="css/login.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />
</head>

<body>
    <div class="login">
        <form id="registerForm">
            <h1 class="loginn">sign-up</h1>
            <div class="input-box">
                <input type="text" id="username" placeholder="Username..." required />
                <i class="fa-solid fa-user"></i>
            </div>
            <div class="input-box">
                <input type="email" id="email" placeholder="Email..." required />
                <i class="fa-solid fa-envelope"></i>
            </div>
            <div class="input-box">
                <input type="password" id="password" placeholder="Password..." required />
                <i class="fa-solid fa-lock"></i>
            </div>
            <button type="submit" class="btn" id="sign-up">sign-up</button>
            <div class="register-link">
                <p>Go back to <a href="login.html">login-page</a></p>
            </div>
        </form>
    </div>

    <script>
        document
            .getElementById("registerForm")
            .addEventListener("submit", function (event) {
                event.preventDefault();

                // Get user input values
                const username = document.getElementById("username").value;
                const email = document.getElementById("email").value;
                const password = document.getElementById("password").value;

                // Create a new user profile
                const newUser = {
                    username: username,
                    email: email,
                    password: password, // Note: Avoid storing passwords in plain text in real applications
                    profilePicture: "img/av1.png", // Default profile picture
                };

                // Get existing users from localStorage or initialize an empty array
                const users = JSON.parse(localStorage.getItem("users")) || [];
                users.push(newUser);

                // Save updated users array to localStorage
                localStorage.setItem("users", JSON.stringify(users));

                // Save the current user profile for the session
                localStorage.setItem("userProfile", JSON.stringify(newUser));

                // Redirect to profile.html
                window.location.href = "index.html";
            });
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Get user data from localStorage
            const userProfile = JSON.parse(localStorage.getItem("userProfile"));

            if (userProfile) {
                // Populate profile page with user data
                document.querySelector(".profile-header h2").textContent =
                    userProfile.username;
                document.querySelector(".profile-header p").textContent =
                    userProfile.email;
                document.querySelector(".profile-header img").src =
                    userProfile.profilePicture;
            } else {
                // Redirect to register.html if no user data is found
                window.location.href = "register.html";
            }
        });
    </script>
</body>

</html>